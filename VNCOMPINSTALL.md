# Сборка внешней компоненты для работы с криптографией

Исходный код компонеты располагается в каталоге **Crypt1CLib**. Сборка выполняется с использованием инструмента CMake и Visual Studio для Windows или make для Linux.

### Сборка версии для ОС Windows

Для сборки под Windows необходимо установить IDE Visual Studio и CMake (можно использовать из состава инструментов Visual Studio).

Так же, понадобится библиотека OpenSSL с заголовочными файлами (.H) для Windows. Можно найти готовую сборку или выполнить ее самостоятельно по [инструкции](https://github.com/openssl/openssl/blob/master/NOTES-WINDOWS.md).

**Выполняемые действия для сборки**

1. Откройте командную строку Windows и перейдите к каталогу с исходными кодами компоненты:  
`cd /D <путь_к_каталогу_с_исходными_кодами>`

2. Введите команду для создания проекта Visual Studio:  
`cmake -DOPENSSL_INCLUDE_DIR=<путь_к_каталогу_include_openssl> -DOPENSSL_LIB_DIR=<путь_к_файлам_библиотеки_openssl> .`  
где:  
`путь_к_каталогу_include_openssl` - укажите путь к каталогу `include`, содержащем заголовочные файлы (.H) библиотеки OpenSSL.  
`путь_к_файлам_библиотеки_openssl` - укажите путь к каталогу, в котором располагаются двоичные файлы библиотеки OpenSSL:  
- `libssl-3-x64.dll` и `libcrypto-3-x64.dll` для динамической линковки библиотеки или:  
- `libssl.lib` и `libcrypto.lib` для статической линковки.

В результате будет создан файл проекта Visual Studio `Crypt1CLib.sln`

3. Откройте проект в Visual Studio и выполните сборку компоненты средствами IDE.

### Сборка версии для ОС Linux

Для сборки под Linux необходимо установить дополнительные пакеты. Для Ubuntu это можно сделать следующей командой:  
`sudo apt-get install build-essential uuid-dev cmake`

Если в системе не установлен пакет OpenSSL, то его так же необходимо установить. Пример команды Ubuntu для установки openssl:  
`sudo apt-get install openssl`

**Выполняемые действия для сборки**

1. Откройте терминал Linux и перейдите к каталогу с исходными кодами компоненты:  
`cd <путь_к_каталогу_с_исходными_кодам>`

2. Введите команду для генерации makefile сборки:  
`cmake .`

3. Выполните сборку компоненты:  
`make`
